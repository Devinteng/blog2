/*!
 * Hux Blog v1.7.0 (http://huxpro.github.io)
 * Copyright 2018 Hux <huxpro@gmail.com>
 */

$(document).ready(function(){$("table").wrap("<div class='table-responsive'></div>"),$("table").addClass("table")}),$(document).ready(function(){$('iframe[src*="youtube.com"]').wrap('<div class="embed-responsive embed-responsive-16by9"></div>'),$('iframe[src*="youtube.com"]').addClass("embed-responsive-item"),$('iframe[src*="vimeo.com"]').wrap('<div class="embed-responsive embed-responsive-16by9"></div>'),$('iframe[src*="vimeo.com"]').addClass("embed-responsive-item")}),jQuery(document).ready(function(a){var b=1170;if(a(window).width()>b){var c=a(".navbar-custom").height(),d=a(".intro-header .container").height();a(window).on("scroll",{previousTop:0},function(){var b=a(window).scrollTop(),e=a(".side-catalog");b<this.previousTop?b>0&&a(".navbar-custom").hasClass("is-fixed")?a(".navbar-custom").addClass("is-visible"):a(".navbar-custom").removeClass("is-visible is-fixed"):(a(".navbar-custom").removeClass("is-visible"),b>c&&!a(".navbar-custom").hasClass("is-fixed")&&a(".navbar-custom").addClass("is-fixed")),this.previousTop=b,e.show(),b>d+41?e.addClass("fixed"):e.removeClass("fixed")})}});
// 回到顶部
blog.addLoadEvent(function() {
  var upDom = document.getElementById('moveUp')
  var bottom = parseInt(window.getComputedStyle(upDom).bottom)
  // 隐藏
  upDom.style.bottom = -2 * bottom + 'px'

  function getScrollTop() {
    if (document.documentElement && document.documentElement.scrollTop) {
      return document.documentElement.scrollTop
    } else if (document.body) {
      return document.body.scrollTop
    }
  }

  blog.addEvent(window, 'scroll', function() {
    if (getScrollTop() > 200) {
      upDom.style.bottom = bottom + 'px'
    } else {
      upDom.style.bottom = -2 * bottom + 'px'
    }
  })

  blog.addEvent(upDom, 'click', function() {
    if (document.documentElement && document.documentElement.scrollTop) {
      document.documentElement.scrollTop = 0
    } else if (document.body) {
      document.body.scrollTop = 0
    }
  })
})

// 文字冒泡-Traveling light
blog.addLoadEvent(function() {
  if (document.body.offsetWidth <= 560) {
    return false
  }
  var texts = [
    '我喜欢',
    '做',
    '白日梦',
    'traveling',
    'light',
    'down',
    'by',
    'the',
    'riverside',
  ]
  var temp = '<span style="top:{top}px;'
  temp += 'left:{left}px;'
  temp += 'font-size: 12px;'
  temp += 'width: 30px;'
  temp += 'z-index: 999;'
  temp += 'position: absolute;'
  temp += 'opacity: 1;'
  temp += 'transition: all 500ms ease-out;'
  temp += '-webkit-transition: all 500ms ease-out;"'
  temp += 'class="select-none"'
  temp += '>{text}</span>'

  blog.addEvent(window, 'click', function(ev) {
    var tagName = ev.target.tagName.toLocaleLowerCase()
    if (tagName == 'a') {
      return
    }
    var text = texts[parseInt(Math.random() * texts.length)]
    var html = temp.replace('{text}', text)
    html = html.replace('{top}', ev.pageY - 10)
    html = html.replace('{left}', ev.pageX - 10)

    var o = document.createElement('div')
    o.innerHTML = html
    var node = o.children[0]

    document.body.appendChild(node)
    o = null
    setTimeout(function() {
      node.style.top = ev.pageY - 50 + 'px'
      node.style.opacity = 0
    }, 20)

    setTimeout(function() {
      document.body.removeChild(node)
      node = null
    }, 500)
  })
})
